{# Hatano-Lab/app/templates/post_detail.html #}
{% extends "base_after.html" %}

{% block title %}
{{ post.article_title }} | è¨˜äº‹è©³ç´°
{% endblock %}

{% block content %}

<div class="bg-red-100 text-red-800 p-4 mb-6 rounded">
    âœ… post_detail.html ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™
</div>


<div class="max-w-4xl mx-auto px-4 py-8">

    <!-- =====================
         è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«
    ====================== -->
    <h2 class="text-3xl font-bold text-gray-800 mb-4 border-b pb-2">
        {{ post.article_title }}
    </h2>

    <!-- =====================
         è¨˜äº‹ãƒ¡ã‚¿æƒ…å ±
    ====================== -->
    <div class="text-sm text-gray-500 mb-6 space-x-4">
        <span>è¨˜äº‹ID: {{ post.article_id }}</span>
        <span>
            æœ€çµ‚æ›´æ–°:
            {{ post.rec_upd_tmstmp.strftime('%Y-%m-%d %H:%M') }}
        </span>
    </div>

    <!-- =====================
         ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ
    ====================== -->
    {% if post.article_image_path %}
    <div class="mb-6">
        <img
            src="{{ url_for('static', filename=post.article_image_path) }}"
            alt="{{ post.article_title }}"
            class="w-full rounded-lg shadow-md"
        >
    </div>
    {% endif %}

    <!-- =====================
         è¨˜äº‹æœ¬æ–‡
    ====================== -->
    <article class="prose max-w-none bg-white p-6 rounded-lg shadow mb-10">
        {{ post.article_body | safe }}
    </article>

    <!-- =====================
         ç®¡ç†è€…ç”¨æ“ä½œãƒœã‚¿ãƒ³
    ====================== -->
    {% if logged_in %}
    <div class="flex flex-wrap gap-4">

        <!-- ç·¨é›† -->
        <a
            href="{{ url_for('post_edit', post_id=post.article_id) }}"
            class="inline-flex items-center px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"
        >
            âœï¸ è¨˜äº‹ã‚’ç·¨é›†
        </a>

        <!-- å‰Šé™¤ï¼ˆPOSTï¼‰ -->
        <form
            method="POST"
            action="{{ url_for('post_delete', post_id=post.article_id) }}"
            onsubmit="return confirm('âš ï¸ æœ¬å½“ã«ã“ã®è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚');"
        >
            <button
                type="submit"
                class="inline-flex items-center px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"
            >
                ğŸ—‘ è¨˜äº‹ã‚’å‰Šé™¤
            </button>
        </form>

        <!-- æ–°è¦è¨˜äº‹ä½œæˆ -->
        <a
            href="{{ url_for('post_create') }}"
            class="inline-flex items-center px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition"
        >
            â• æ–°è¦è¨˜äº‹ä½œæˆ
        </a>

        <!-- ç®¡ç†ç”»é¢ã¸æˆ»ã‚‹ -->
        <a
            href="{{ url_for('admin_dashboard') }}"
            class="inline-flex items-center px-6 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition"
        >
            â¬…ï¸ ç®¡ç†ç”»é¢ã«æˆ»ã‚‹
        </a>

    </div>
    {% endif %}

</div>

{% endblock %}
